<%-include("../userPartials/header")%>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<nav class="newnavbar navbar navbar-expand-lg bg-black sticky-top navbar-dark p-3 shadow-sm navbar-color ">
  <div class="container-fluid">
    <a class="navbar-brand icon-size " href="/user/home" style="font-family: 'radley';font-size: 25px;"> SHOEX</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="mx-auto my-3 d-lg-none d-sm-block d-xs-block">
      <div class="input-group">
        <span class="border-dark input-group-text bg-dark text-white"><i class="fa-solid fa-magnifying-glass"></i></span>
        <input type="text" class="form-control border-dark" style="color:#7a7a7a">
        <button class="btn btn-dark text-white">Search</button>
      </div>
    </div>
    <div class=" collapse navbar-collapse" id="navbarNavDropdown">
      
      <div class="ms-auto d-none d-lg-block">
        <form action="/user/searchproducts" onsubmit="return validateSearchForm()">
        <div class="input-group">
          <span class="border-dark input-group-text bg-dark text-white search-icon">
            <i class="fa-solid fa-magnifying-glass"></i>
          </span>
          <input type="text" name="query" class="form-control border-white search-input" id="navbarSearchInput" placeholder="Search">
          <button class="btn btn-dark text-white">Search</button>
        </div>
      </form>
      </div>
      <ul class="navbar-nav ms-auto text-end ">
        <li class="nav-item ">
          <a class="nav-link mx-2  active " aria-current="page" href="/user/home">Home</a>
        </li>
        <li class="nav-item ">
          <a class="nav-link mx-2  active " aria-current="page" href="/user-viewallProduct">Shop</a>
        </li>
       
        <li class="nav-item">
          <a class="nav-link mx-2  active" aria-current="page" href="#">About</a>
        </li>
       
        <li class="nav-item">
          <a class="nav-link mx-2  active " aria-current="page" href="#">Contact</a>
        </li>
       
        
      </ul>
      <ul class="navbar-nav ms-auto text-end">
        <li class="nav-item dropdown d-md-block d-sm-block d-lg-block nav-drop">
          <a class="nav-link mx-2 text-uppercase dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            <i class="fa-solid fa-circle-user me-1" style="color:white;"></i>
          </a>
          <div class="dropdown-menu">
            <a class="dropdown-item" href="/user-profile">Profile</a>
            <a class="dropdown-item" href="#">Settings</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="/user/logout">Logout</a>
          </div>
        </li>
        <li class="nav-item">
          <a class="nav-link mx-2 text-uppercase" href="/user-wishlist"><i class=" fas fa-heart me-1 text-white"></i></a>
        </li>
        <li class="nav-item">
          <a class="nav-link mx-2 text-uppercase" href="/user-addtoCart">
            <i class="fa-solid fas fa-shopping-cart me-1 text-white"></i>
            <% if (cartcount > 0) { %>
              <span class="position-absolute translate-middle badge rounded-pill bg-danger">
                <%= cartcount %>
              </span>
            <% } else { %>
              <span class="position-absolute translate-middle badge rounded-pill bg-danger"></span>
            <% } %>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link mx-2 text-uppercase" href="/user-wallet"><i class="fa-solid fas fa-wallet me-1 text-white"></i></a>
        </li>
      </ul>
    </div>
  </div>
</nav>
<script>
function validateSearchForm() {
  const searchQuery = document.getElementById('navbarSearchInput').value.trim();

  if (searchQuery === '') {
    // Use SweetAlert for a nicer notification
    Swal.fire({
      icon: 'error',
      title: 'Oops...',
      text: 'Search field cannot be empty',
    });
    return false; // Stop form submission if the query is empty
  }

  // If the query is not empty, you can proceed with the form submission
  return true;
}
  </script>
<!-- <script>
  function performNavbarSearch() {
    const searchQuery = document.getElementById('navbarSearchInput').value;

   
    searchProducts(searchQuery);
}

function searchProducts(query) {
  
    fetch(`/user/searchProducts?query=${query}`)
        .then(response => response.json())
        .then(products => {
            console.log(products,"111111111111111111111");
            displaySearchResults(products);
        })
        .catch(error => console.error('Error fetching search results:', error));
}

function displaySearchResults(products) {
    
    const productListContainer = document.getElementById('filteredProductContainer');
    productListContainer.innerHTML = '';

    // Display the search results
    products.forEach(product => {
        const productContainer = document.createElement('div');
        // Add product information to productContainer (similar to existing product display)

        productListContainer.appendChild(productContainer);
    });
} -->
</script>